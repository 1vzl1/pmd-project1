<html><head><link rel="import" href="../lib/array-splice.html">
<link rel="import" href="../lib/dom-tree-api.html">
<link rel="import" href="../lib/dom-api.html">
<link rel="import" href="../lib/dom-api-shady.html">
<link rel="import" href="../lib/dom-api-shadow.html">
<link rel="import" href="../lib/dom-api-flush.html">
<link rel="import" href="../lib/dom-api-event.html">
<link rel="import" href="../lib/dom-api-classlist.html">
<link rel="import" href="../lib/dom-api-effective-nodes-observer.html">
<link rel="import" href="../lib/dom-api-distributed-nodes-observer.html">
<script>!function(){function t(t,o){o._distributedNodes.push(t);var i=t._destinationInsertionPoints;i?i.push(o):t._destinationInsertionPoints=[o]}function o(t){var o=t._distributedNodes;if(o)for(var i=0;i<o.length;i++){var e=o[i]._destinationInsertionPoints;e&&e.splice(e.indexOf(t)+1,e.length)}}function i(t,o){var i=u.Logical.getParentNode(t);i&&i.shadyRoot&&l.hasInsertionPoint(i.shadyRoot)&&i.shadyRoot._distributionClean&&(i.shadyRoot._distributionClean=!1,o.shadyRoot._dirtyRoots.push(i))}function e(t,o){var i=o._destinationInsertionPoints;return i&&i[i.length-1]===t}function s(t){return"content"==t.localName}function n(t){for(;t&&h(t);)t=t.domHost;return t}function h(t){for(var o,i=u.Logical.getChildNodes(t),e=0;e<i.length;e++)if(o=i[e],o.localName&&"content"===o.localName)return t.domHost}function r(t){for(var o,i=0;i<t._insertionPoints.length;i++)o=t._insertionPoints[i],l.hasApi(o)&&Polymer.dom(o).notifyObserver()}function d(t){l.hasApi(t)&&Polymer.dom(t).notifyObserver()}function a(t){if(_&&t)for(var o=0;o<t.length;o++)CustomElements.upgrade(t[o])}var l=Polymer.DomApi,u=Polymer.TreeApi;Polymer.Base._addFeature({_prepShady:function(){this._useContent=this._useContent||Boolean(this._template)},_setupShady:function(){this.shadyRoot=null,this.__domApi||(this.__domApi=null),this.__dom||(this.__dom=null),this._ownerShadyRoot||(this._ownerShadyRoot=void 0)},_poolContent:function(){this._useContent&&u.Logical.saveChildNodes(this)},_setupRoot:function(){this._useContent&&(this._createLocalRoot(),this.dataHost||a(u.Logical.getChildNodes(this)))},_createLocalRoot:function(){this.shadyRoot=this.root,this.shadyRoot._distributionClean=!1,this.shadyRoot._hasDistributed=!1,this.shadyRoot._isShadyRoot=!0,this.shadyRoot._dirtyRoots=[];var t=this.shadyRoot._insertionPoints=!this._notes||this._notes._hasContent?this.shadyRoot.querySelectorAll("content"):[];u.Logical.saveChildNodes(this.shadyRoot);for(var o,i=0;i<t.length;i++)o=t[i],u.Logical.saveChildNodes(o),u.Logical.saveChildNodes(o.parentNode);this.shadyRoot.host=this},get domHost(){var t=Polymer.dom(this).getOwnerRoot();return t&&t.host},distributeContent:function(t){if(this.shadyRoot){this.shadyRoot._invalidInsertionPoints=this.shadyRoot._invalidInsertionPoints||t;var o=n(this);Polymer.dom(this)._lazyDistribute(o)}},_distributeContent:function(){this._useContent&&!this.shadyRoot._distributionClean&&(this.shadyRoot._invalidInsertionPoints&&(Polymer.dom(this)._updateInsertionPoints(this),this.shadyRoot._invalidInsertionPoints=!1),this._beginDistribute(),this._distributeDirtyRoots(),this._finishDistribute())},_beginDistribute:function(){this._useContent&&l.hasInsertionPoint(this.shadyRoot)&&(this._resetDistribution(),this._distributePool(this.shadyRoot,this._collectPool()))},_distributeDirtyRoots:function(){for(var t,o=this.shadyRoot._dirtyRoots,i=0,e=o.length;i<e&&(t=o[i]);i++)t._distributeContent();this.shadyRoot._dirtyRoots=[]},_finishDistribute:function(){if(this._useContent){if(this.shadyRoot._distributionClean=!0,l.hasInsertionPoint(this.shadyRoot))this._composeTree(),r(this.shadyRoot);else if(this.shadyRoot._hasDistributed){var t=this._composeNode(this);this._updateChildNodes(this,t)}else u.Composed.clearChildNodes(this),this.appendChild(this.shadyRoot);this.shadyRoot._hasDistributed||d(this),this.shadyRoot._hasDistributed=!0}},elementMatches:function(t,o){return o=o||this,l.matchesSelector.call(o,t)},_resetDistribution:function(){for(var t=u.Logical.getChildNodes(this),i=0;i<t.length;i++){var e=t[i];e._destinationInsertionPoints&&(e._destinationInsertionPoints=void 0),s(e)&&o(e)}for(var n=this.shadyRoot,h=n._insertionPoints,r=0;r<h.length;r++)h[r]._distributedNodes=[]},_collectPool:function(){for(var t=[],o=u.Logical.getChildNodes(this),i=0;i<o.length;i++){var e=o[i];s(e)?t.push.apply(t,e._distributedNodes):t.push(e)}return t},_distributePool:function(t,o){for(var e,s=t._insertionPoints,n=0,h=s.length;n<h&&(e=s[n]);n++)this._distributeInsertionPoint(e,o),i(e,this)},_distributeInsertionPoint:function(o,i){for(var e,s=!1,n=0,h=i.length;n<h;n++)e=i[n],e&&this._matchesContentSelect(e,o)&&(t(e,o),i[n]=void 0,s=!0);if(!s)for(var r=u.Logical.getChildNodes(o),d=0;d<r.length;d++)t(r[d],o)},_composeTree:function(){this._updateChildNodes(this,this._composeNode(this));for(var t,o,i=this.shadyRoot._insertionPoints,e=0,s=i.length;e<s&&(t=i[e]);e++)o=u.Logical.getParentNode(t),o._useContent||o===this||o===this.shadyRoot||this._updateChildNodes(o,this._composeNode(o))},_composeNode:function(t){for(var o=[],i=u.Logical.getChildNodes(t.shadyRoot||t),n=0;n<i.length;n++){var h=i[n];if(s(h))for(var r=h._distributedNodes,d=0;d<r.length;d++){var a=r[d];e(h,a)&&o.push(a)}else o.push(h)}return o},_updateChildNodes:function(t,o){for(var i,e=u.Composed.getChildNodes(t),s=Polymer.ArraySplice.calculateSplices(o,e),n=0,h=0;n<s.length&&(i=s[n]);n++){for(var r,d=0;d<i.removed.length&&(r=i.removed[d]);d++)u.Composed.getParentNode(r)===t&&u.Composed.removeChild(t,r),e.splice(i.index+h,1);h-=i.addedCount}for(var i,a,n=0;n<s.length&&(i=s[n]);n++)for(a=e[i.index],d=i.index,r;d<i.index+i.addedCount;d++)r=o[d],u.Composed.insertBefore(t,r,a),e.splice(d,0,r)},_matchesContentSelect:function(t,o){var i=o.getAttribute("select");if(!i)return!0;if(i=i.trim(),!i)return!0;if(!(t instanceof Element))return!1;var e=/^(:not\()?[*.#[a-zA-Z_|]/;return!!e.test(i)&&this.elementMatches(i,t)},_elementAdd:function(){},_elementRemove:function(){}});var _=window.CustomElements&&!CustomElements.useNative}();</script>
</head><body></body></html>