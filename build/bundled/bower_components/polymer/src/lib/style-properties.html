<html><head><link rel="import" href="dom-api.html">
<link rel="import" href="style-transformer.html">
<link rel="import" href="style-util.html">
<link rel="import" href="settings.html">

<script>Polymer.StyleProperties=function(){"use strict";function e(e,r){var t=parseInt(e/32),o=1<<e%32;r[t]=(r[t]||0)|o}var r=Polymer.DomApi.matchesSelector,t=Polymer.StyleUtil,o=Polymer.StyleTransformer,s=Polymer.Settings;return{decorateStyles:function(e,r){var s=this,n={},a=[],l=0,i=o._calcHostScope(r.is,r["extends"]);t.forRulesInStyles(e,function(e,o){s.decorateRule(e),e.index=l++,s.whenHostOrRootRule(r,e,o,function(o){if(e.parent.type===t.ruleTypes.MEDIA_RULE&&(r.__notStyleScopeCacheable=!0),o.isHost){var s=o.selector.split(" ").some(function(e){return 0===e.indexOf(i)&&e.length!==i.length});r.__notStyleScopeCacheable=r.__notStyleScopeCacheable||s}}),s.collectPropertiesInCssText(e.propertyInfo.cssText,n)},function(e){a.push(e)}),e._keyframes=a;var c=[];for(var f in n)c.push(f);return c},decorateRule:function(e){if(e.propertyInfo)return e.propertyInfo;var r={},t={},o=this.collectProperties(e,t);return o&&(r.properties=t,e.rules=null),r.cssText=this.collectCssText(e),e.propertyInfo=r,r},collectProperties:function(e,r){var t=e.propertyInfo;if(!t){for(var o,s,n=this.rx.VAR_ASSIGN,a=e.parsedCssText;o=n.exec(a);)r[o[1].trim()]=(o[2]||o[3]).trim(),s=!0;return s}if(t.properties)return Polymer.Base.mixin(r,t.properties),!0},collectCssText:function(e){return this.collectConsumingCssText(e.parsedCssText)},collectConsumingCssText:function(e){return e.replace(this.rx.BRACKETED,"").replace(this.rx.VAR_ASSIGN,"")},collectPropertiesInCssText:function(e,r){for(var t;t=this.rx.VAR_CONSUMED.exec(e);){var o=t[1];":"!==t[2]&&(r[o]=!0)}},reify:function(e){for(var r,t=Object.getOwnPropertyNames(e),o=0;o<t.length;o++)r=t[o],e[r]=this.valueForProperty(e[r],e)},valueForProperty:function(e,r){if(e)if(e.indexOf(";")>=0)e=this.valueForProperties(e,r);else{var t=this,o=function(e,o,s,n){var a=t.valueForProperty(r[s],r)||t.valueForProperty(r[n]||n,r)||n;return o+(a||"")};e=e.replace(this.rx.VAR_MATCH,o)}return e&&e.trim()||""},valueForProperties:function(e,r){for(var t,o,s=e.split(";"),n=0;n<s.length;n++)if(t=s[n]){if(this.rx.MIXIN_MATCH.lastIndex=0,o=this.rx.MIXIN_MATCH.exec(t))t=this.valueForProperty(r[o[1]],r);else{var a=t.indexOf(":");if(a!==-1){var l=t.substring(a);l=l.trim(),l=this.valueForProperty(l,r)||l,t=t.substring(0,a)+l}}s[n]=t&&t.lastIndexOf(";")===t.length-1?t.slice(0,-1):t||""}return s.join(";")},applyProperties:function(e,r){var t="";e.propertyInfo||this.decorateRule(e),e.propertyInfo.cssText&&(t=this.valueForProperties(e.propertyInfo.cssText,r)),e.cssText=t},applyKeyframeTransforms:function(e,r){var t=e.cssText,o=e.cssText;if(null==e.hasAnimations&&(e.hasAnimations=this.rx.ANIMATION_MATCH.test(t)),e.hasAnimations){var s;if(null==e.keyframeNamesToTransform){e.keyframeNamesToTransform=[];for(var n in r)s=r[n],o=s(t),t!==o&&(t=o,e.keyframeNamesToTransform.push(n))}else{for(var a=0;a<e.keyframeNamesToTransform.length;++a)s=r[e.keyframeNamesToTransform[a]],t=s(t);o=t}}e.cssText=o},propertyDataFromStyles:function(o,s){var n={},a=this,l=[];return t.forActiveRulesInStyles(o,function(t){t.propertyInfo||a.decorateRule(t);var o=t.transformedSelector||t.parsedSelector;s&&t.propertyInfo.properties&&o&&r.call(s,o)&&(a.collectProperties(t,n),e(t.index,l))}),{properties:n,key:l}},whenHostOrRootRule:function(e,r,t,n){if(r.propertyInfo||self.decorateRule(r),r.propertyInfo.properties){var a=e.is?o._calcHostScope(e.is,e["extends"]):"html",l=r.parsedSelector,i=":root"===l,c=0===l.indexOf(":host"),f=e.__cssBuild||t.__cssBuild;if("shady"===f&&(i=l===a+"> *."+a||l.indexOf("html")!==-1,c=!i&&0===l.indexOf(a)),"shadow"===f&&(i=":host > *"===l||"html"===l,c=c&&!i),i||c){var p=a;c&&(s.useNativeShadow&&!r.transformedSelector&&(r.transformedSelector=o._transformRuleCss(r,o._transformComplexSelector,e.is,a)),p=r.transformedSelector||a),n({selector:p,isHost:c,isRoot:i})}}},hostAndRootPropertiesForScope:function(e){var o={},s={},n=this;return t.forActiveRulesInStyles(e._styles,function(t,a){n.whenHostOrRootRule(e,t,a,function(a){var l=e._element||e;r.call(l,a.selector)&&(a.isHost?n.collectProperties(t,o):n.collectProperties(t,s))})}),{rootProps:s,hostProps:o}},transformStyles:function(e,r,t){var n=this,a=o._calcHostScope(e.is,e["extends"]),l=e["extends"]?"\\"+a.slice(0,-1)+"\\]":a,i=new RegExp(this.rx.HOST_PREFIX+l+this.rx.HOST_SUFFIX),c=this._elementKeyframeTransforms(e,t);return o.elementStyles(e,function(o){n.applyProperties(o,r),s.useNativeShadow||Polymer.StyleUtil.isKeyframesSelector(o)||!o.cssText||(n.applyKeyframeTransforms(o,c),n._scopeSelector(o,i,a,e._scopeCssViaAttr,t))})},_elementKeyframeTransforms:function(e,r){var t=e._styles._keyframes,o={};if(!s.useNativeShadow&&t)for(var n=0,a=t[n];n<t.length;a=t[++n])this._scopeKeyframes(a,r),o[a.keyframesName]=this._keyframesRuleTransformer(a);return o},_keyframesRuleTransformer:function(e){return function(r){return r.replace(e.keyframesNameRx,e.transformedKeyframesName)}},_scopeKeyframes:function(e,r){e.keyframesNameRx=new RegExp(e.keyframesName,"g"),e.transformedKeyframesName=e.keyframesName+"-"+r,e.transformedSelector=e.transformedSelector||e.selector,e.selector=e.transformedSelector.replace(e.keyframesName,e.transformedKeyframesName)},_scopeSelector:function(e,r,t,s,n){e.transformedSelector=e.transformedSelector||e.selector;for(var a,l=e.transformedSelector,i=s?"["+o.SCOPE_NAME+"~="+n+"]":"."+n,c=l.split(","),f=0,p=c.length;f<p&&(a=c[f]);f++)c[f]=a.match(r)?a.replace(t,i):i+" "+a;e.selector=c.join(",")},applyElementScopeSelector:function(e,r,t,s){var n=s?e.getAttribute(o.SCOPE_NAME):e.getAttribute("class")||"",a=t?n.replace(t,r):(n?n+" ":"")+this.XSCOPE_NAME+" "+r;n!==a&&(s?e.setAttribute(o.SCOPE_NAME,a):e.setAttribute("class",a))},applyElementStyle:function(e,r,o,n){var a=n?n.textContent||"":this.transformStyles(e,r,o),l=e._customStyle;return l&&!s.useNativeShadow&&l!==n&&(l._useCount--,l._useCount<=0&&l.parentNode&&l.parentNode.removeChild(l)),s.useNativeShadow?e._customStyle?(e._customStyle.textContent=a,n=e._customStyle):a&&(n=t.applyCss(a,o,e.root,e._scopeStyle)):n?n.parentNode||t.applyStyle(n,null,e._scopeStyle):a&&(n=t.applyCss(a,o,null,e._scopeStyle)),n&&(n._useCount=n._useCount||0,e._customStyle!=n&&n._useCount++,e._customStyle=n),n},mixinCustomStyle:function(e,r){var t;for(var o in r)t=r[o],(t||0===t)&&(e[o]=t)},updateNativeStyleProperties:function(e,r){for(var t=0;t<e.style.length;t++)e.style.removeProperty(e.style[t]);for(var o in r)null!==r[o]&&e.style.setProperty(o,r[o])},rx:t.rx,XSCOPE_NAME:"x-scope"}}();</script>
</head><body></body></html>