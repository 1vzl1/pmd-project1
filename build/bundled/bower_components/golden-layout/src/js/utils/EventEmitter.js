lm.utils.EventEmitter=function(){this._mSubscriptions={},this._mSubscriptions[lm.utils.EventEmitter.ALL_EVENT]=[],this.on=function(i,t,s){this._mSubscriptions[i]||(this._mSubscriptions[i]=[]),this._mSubscriptions[i].push({fn:t,ctx:s})},this.emit=function(i){var t,s,n;if(n=Array.prototype.slice.call(arguments,1),this._mSubscriptions[i])for(t=0;t<this._mSubscriptions[i].length;t++)s=this._mSubscriptions[i][t].ctx||{},this._mSubscriptions[i][t].fn.apply(s,n);for(n.unshift(i),t=0;t<this._mSubscriptions[lm.utils.EventEmitter.ALL_EVENT].length;t++)s=this._mSubscriptions[lm.utils.EventEmitter.ALL_EVENT][t].ctx||{},this._mSubscriptions[lm.utils.EventEmitter.ALL_EVENT][t].fn.apply(s,n)},this.unbind=function(i,t,s){if(!this._mSubscriptions[i])throw new Error("No subscribtions to unsubscribe for event "+i);var n,r=!1;for(n=0;n<this._mSubscriptions[i].length;n++)this._mSubscriptions[i][n].fn!==t||s&&s!==this._mSubscriptions[i][n].ctx||(this._mSubscriptions[i].splice(n,1),r=!0);if(r===!1)throw new Error("Nothing to unbind for "+i)},this.off=this.unbind,this.trigger=this.emit},lm.utils.EventEmitter.ALL_EVENT="__all";