<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="px-pagination.html">
<link rel="import" href="px-data-table-cell.html">
<link rel="import" href="../polymer-font-awesome/polymer-font-awesome.html">

</head><body><dom-module id="aha-table">
  <link rel="import" type="css" href="css/aha-table.css">
  <template>
    <content id="columndefs"></content>

    <template is="dom-if" if="{{showColumnChooser}}">
      <div class="flex columnChooser">
        <px-dropdown display-value="Show/Hide Column">
          <px-dropdown-content class="px-dropdown-content" checkbox-mode="true" max-cont-character-width="16" items="{{_columnChooserItems}}">
          </px-dropdown-content>
        </px-dropdown>
      </div>
    </template>
    <div class="scroll-body">

      <div id="scrollBodyTableContainer" class$="{{_getTableClass(tableRows, tableColumns)}}">
        
        <div class="tr">
          <template is="dom-repeat" items="{{meta}}" as="column">
            <template is="dom-if" if="{{_isFalse(column.hide)}}">
              <span class$="{{_getHeaderClass(column)}}" draggable="{{enableColumnReorder}}" on-touchstart="_dragStartColumnHeader" on-touchmove="_touchMoveHeader" on-touchleave="_dragLeave" on-touchend="_touchDropColumnHeader" on-dragleave="_dragLeave" on-dragstart="_dragStartColumnHeader" on-dragover="_dragOverHeader" on-drop="_dragDropColumnHeader" on-dragend="_dragEndColumnHeader">
                <div class="flex header--container">
                  <span class$="{{_getTextSortingClass(column, sortedColumn)}}" on-tap="_sort">{{column.label}}<iron-icon icon="{{_getSortingIcon(column, sortedColumn, descending)}}" class$="{{_getSortingClass(column, sortedColumn, descending)}}"></iron-icon>
                  </span>
                  <template is="dom-if" if="{{!_isEqual(column.type, 'selected')}}">
                    <div class="header--drag-handle" on-down="_headerResizeMouseDown" on-track="_headerTrack">
                    </div>
                  </template>
                </div>
              </span>
            </template>
          </template>
        </div>

        
        <div class$="{{_getSecondHeaderClass(_enableFilterRow)}}">
          <template is="dom-repeat" items="{{meta}}" as="column" id="filterRepeat">
            <template is="dom-if" if="{{_isFalse(column.hide)}}">
              <span class$="{{_getFilterHeaderClass(column)}}">
                
                <template is="dom-if" if="{{_isSelectAllColumn(column)}}">
                  <span class="flex flex--center">
                    <input id="selectAllCheckbox" type="checkbox" on-change="_clickSelectAll">
                  </span>
                </template>

                
                <template is="dom-if" if="{{_isFilterableColumn(column, column.filterable)}}">
                  <input placeholder="Filter" class="text-input text-input--filter" type="text" on-keyup="_filter">
                </template>

              </span>
            </template>
          </template>
        </div>
        
        <template id="recordList" is="dom-repeat" items="{{displayedRows}}" as="internalRow" strip-whitespace="">

          <div class$="{{_getRowClass(internalRow)}}">
            
            <template is="dom-repeat" items="{{meta}}" as="column">
              <template is="dom-if" if="{{_isFalse(column.hide)}}">
                
                <template is="dom-if" if="{{_isEqual(column.type, 'selected')}}">
                  <span class$="{{_getSelectedCellClass(internalRow._selected, internalRow._highlight)}}" on-click="_clickRow">
                    <span class="flex flex--center flex--middle">
                      <input type="checkbox" checked="{{internalRow._selected::change}}">
                    </span>
                  </span>
                </template>
                <template id="cellRepeat" is="dom-if" if="{{!_isEqual(column.type, 'selected')}}">
                  <px-data-table-cell on-save="_save" row-highlighted="[[internalRow._highlight]]" cell-highlighted="[[_getHighlightValue(internalRow, column, column.highlightdefined)]]" cell-selected="[[internalRow._selected]]" on-validate="_handleValidateEvent" cell-type="{{column.type}}" dropdown-items="{{column.dropdownItems}}" dropdown-bounds="{{scrollBody}}" cell-display-value="{{_readContent(internalRow, column)}}" cell-value="{{_getInternalDataAt(internalRow, column.name)}}" cell-display-tooltip="{{_shouldClipDatumString(internalRow, column)}}" cell-editable="{{column.editable}}" cell-validation="{{_getInternalCellValidationStateAt(internalRow, column.name)}}" column-name="{{column.name}}" dropdown-max-character-width="{{column.maxColumnCharacterWidth}}" on-tap="_clickCell">
                  </px-data-table-cell>
                </template>
              </template>
            </template>
          </div>
        </template>
      </div>

      <template is="dom-if" if="{{!displayedRows.length}}">
        <div class="flex flex--center no-results">No Results</div>
      </template>
    </div>
    
    <div class="pagination">
      <px-pagination class$="{{_getPaginationVisibility(hidePaginationControl)}}" id="pagination" number-of-items="{{numberOfItems}}" page-size="{{pageSize}}" first-item-index-to-display="{{firstItemIndex}}">
      </px-pagination>
    </div>
  </template>
</dom-module>
<script>Polymer({is:"aha-table",properties:{data:{type:Array,notify:!0,value:function(){return[]}},meta:{type:Array,value:function(){return[]}},selectedRows:{type:Array,value:function(){return[]},notify:!0},selectable:{type:Boolean,value:!1,observer:"_selectableChanged"},striped:{type:Boolean,value:!1},tableRows:{type:Boolean,value:!1},tableColumns:{type:Boolean,value:!1},filterable:{type:Boolean,value:!1},_enableFilterRow:{type:Boolean,value:!1},sortedColumn:{type:String,value:""},filteredColumns:{type:Array,value:function(){return[]}},displayedRows:{type:Array,value:function(){return[]}},descending:{type:Boolean,value:!1},hidePaginationControl:{type:Boolean,value:!1},showColumnChooser:{type:Boolean,value:!1},enableColumnReorder:{type:Boolean,value:!1},enableColumnResize:{type:Boolean,value:!1},_internalData:{type:Array,value:function(){return[]}},_columnChooserItems:{type:Array,computed:"_computeColumnChooserItems(meta, meta.*)"},_displayingInsertion:{type:Boolean,value:!1},_requestInsertionIndicatorRemoval:{type:Boolean,value:!1},_headerInitialSize:{type:Number,value:0},_columnDragged:{type:String,value:""},_isAttached:{type:Boolean,value:!1},scrollBody:{type:HTMLElement,value:function(){Polymer.dom(this.root).querySelector("#scrollBodyTableContainer")}}},observers:["_updateDisplayedRows(firstItemIndex)","_updateDisplayedRows(pageSize)","_dataChanged(data.*)","_columnChooserChanged(_columnChooserItems.*)","_computeIfColumnFilterEnabled(meta.splices, filterable, meta.*, selectable)"],ready:function(){this.addEventListener("px-data-table-highlight-loaded",this._highlightLoaded.bind(this)),this.scrollBody=Polymer.dom(this.root).querySelector("#scrollBodyTableContainer");var e=this._columnChanged.bind(this);this._observer=Polymer.dom(this.$.columndefs).observeNodes(e)},attached:function(){this._isAttached=!0},_columnChanged:function(e){var t=e.addedNodes.filter(function(e){return e.nodeType===Node.ELEMENT_NODE&&"PX-DATA-TABLE-COLUMN"===e.nodeName}),i=e.removedNodes.filter(function(e){return e.nodeType===Node.ELEMENT_NODE&&"PX-DATA-TABLE-COLUMN"===e.nodeName});if(t.length>0){this.selectable&&!this._selectedColumnExists()&&this.push("meta",this._generateMetaForColumn("_selected","selected",!0,"Selected (0)"));for(var n=0;n<t.length;n++){if(t[n].type||(t[n].type="string"),!t[n].label){var a=t[n].name||"";t[n].label=a.charAt(0).toUpperCase()+a.slice(1)}this._addColumn(t[n])}}i.forEach(function(e){this.meta.forEach(function(t,i){e===t&&this.splice("meta",i,1)}.bind(this))}.bind(this))},_addColumn:function(e){var t,i=this.getEffectiveChildren().every(function(i,n){return i.name!==e.name&&(t=i,!0)});if(i)this.push("meta",e);else{var n=0;t?this.meta.forEach(function(e,i){e.name===t.name&&(n=i+1)}):n=this.selectable?1:0,this.splice("meta",n,0,e)}},_selectedColumnExists:function(){return this.meta[0]&&"_selected"===this.meta[0].name},_highlightLoaded:function(e){e=Polymer.dom(e);var t=this._findFirstMatchingElementNameFromEventPath(e,"PX-DATA-TABLE-COLUMN");if(t._highLightElLoadedCount+=1,t._highLightElLoadedCount===Polymer.dom(t).querySelectorAll("px-data-table-highlight").length){var i=this._findMetaIndexFromColumnElement(t);i>0&&this.set("meta."+i+".highlightdefined",!0)}},_findMetaIndexFromColumnElement:function(e){var t=-1;return this.meta.some(function(i,n){if(i===e)return t=n,!0}),t},_findFirstMatchingElementNameFromEventPath:function(e,t){var i;return e.path.some(function(e){if(e.nodeName===t)return i=e,!0}),i},_dataChanged:function(e){if(void 0!==this.data&&null!==this.data&&(this._isAttached||0!==e.base.length)){if(!this._isAttached){var t=this;return void this.debounce(function(){t._dataChanged(e)},10)}this.meta&&0!==this.meta.length||this._generateMetaFromData(),"undefined"!=typeof this._internalData&&0===this._internalData.length?this._internalData=this._initializeInternalData():this._internalData=this._refreshInternalData(),this._filterSortAndUpdateDisplayedTable();var i=new RegExp("([#])([0-9])+");if(i.test(e.path)){var n,a=i.exec(e.path)[0].slice(1),l=e.path.split("."),r=l[l.length-1];this.meta.some(function(e){if(e.name===r)return n=e,!0}),this._cellChanged(this._readContent(this._internalData[a],n),e.value)&&this._handleValidateEvent(evt)}}},_selectableChanged:function(e){e===!0&&null!==this.meta&&void 0!==this.meta&&this.meta.length>0?this.splice("meta",0,0,this._generateMetaForColumn("_selected","selected",!0,"Selected (0)")):e===!1&&null!==this.meta&&void 0!==this.meta&&this.meta.length>0&&"_selected"===this.meta[0].name&&this.shift("meta")},_generateMetaFromData:function(){var e=[];for(var t in this.data[0])if(0!==t.indexOf("_")){var i=this._generateLightDomColumn(t,"string",!1,t.charAt(0).toUpperCase()+t.slice(1));Polymer.dom(this).appendChild(i)}return e},_generateLightDomColumn:function(e,t,i,n){return Polymer.Base.create("px-data-table-column",{name:e,label:n,type:t,sortable:!0,filterable:!0,editable:!1,required:!1,selectAll:i})},_generateMetaForColumn:function(e,t,i,n){return Polymer.Base.create("px-data-table-column",{name:e,label:n,type:t,sortable:!0,filterable:!0,editable:!1,required:!1,selectAll:i,validate:function(){return{passedValidation:!0}}})},_filterSortAndUpdateDisplayedTable:function(){var e,t,i,n=0,a=this;for(this.filteredSortedData=this._internalData,e=0,i=this._internalData.length;e<i;e++)this._setInternalDataAt(this._internalData[e],"_filtered",!1);this.sortedColumn&&(this.filteredSortedData=this._sortByColumn(this.filteredSortedData));for(t in this.filteredColumns)this.filteredSortedData=this._filterByColumn(this.filteredColumns[t].name,this.filteredColumns[t].userEntry,this.filteredSortedData);a=this,this._internalData.forEach(function(e){a._getInternalCellStateAt(e,"_filtered")||n++}),this.set("numberOfItems",n),this.$.pagination.goToPageNumber(1),this._updateDisplayedRows()},_refreshInternalData:function(e){var t,i,n=[];for(t=0,i=this.data.length;t<i;t++){var a=this.data[t],l={dataIndex:t};for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(l[r]={},l[r].value=a[r],e?l[r]._validation={passedValidation:!0}:l[r]._validation=this._internalData[t].row[r]._validation);n.push({row:l,_filtered:!e&&this._internalData[t]._filtered,_selected:!e&&this._internalData[t]._selected,_highlight:e?{value:!1,highlightColor:""}:this._internalData[t]._highlight})}return n},_initializeInternalData:function(){return this._refreshInternalData(!0)},_setInternalDataAt:function(e,t,i){"_selected"===t||"_filtered"===t||"_highlight"===t?(this.set("displayedRows."+this.displayedRows.indexOf(e)+"."+t,i),e[t]=i):e.row[t].value=i},_getInternalDataAt:function(e,t){return this._getInternalCellStateAt(e,t).value},_getInternalCellValidationStateAt:function(e,t){return this._getInternalCellStateAt(e,t)._validation},_setInternalCellValidationStateAt:function(e,t,i){e.row[t]._validation=i},_getInternalCellStateAt:function(e,t){return"_selected"===t||"_filtered"===t?e[t]:e.row[t]?e.row[t]:{}},_updateDisplayedRows:function(){var e,t;null===this.firstItemIndex||void 0===this.firstItemIndex||null===this.pageSize||void 0===this.pageSize||void 0===this.filteredSortedData||null===this.filteredSortedData||this.hidePaginationControl?void 0!==this.filteredSortedData&&null!==this.filteredSortedData&&this.hidePaginationControl&&this.set("displayedRows",this.filteredSortedData):(e=this.firstItemIndex-1,t=e+this.pageSize,this.set("displayedRows",this.filteredSortedData.slice(e,t)))},_sort:function(e,t){var i,n=e.model.column;n&&n.sortable&&(i=n.name,i===this.sortedColumn?this.set("descending",!this.descending):(this.set("sortedColumn",i),this.set("descending",!1))),this._filterSortAndUpdateDisplayedTable()},_sortByColumn:function(e){var t,i=this._getSortFunction();return t=e.map(function(e,t){var i;return i="_selected"===this.sortedColumn?this._getInternalCellStateAt(e,this.sortedColumn):this._getInternalDataAt(e,this.sortedColumn),void 0!==i&&null!==i||(i=""),{index:t,value:"string"==typeof i?i.toLowerCase():i}},this).sort(i.bind(this)).map(function(t){return e[t.index]})},_getSortFunction:function(){var e;return"_selected"!==this.sortedColumn&&this.meta.forEach(function(t){this.sortedColumn===t.name&&(e=this._resolveFunctionOnWindow("sort-function-name",t))},this),e||(e="_selected"===this.sortedColumn?this._defaultSortSelected:this._defaultSortAlphabetically),e},_resolveFunctionOnWindow:function(e,t){var i,n,a=window,l=t[e];if((null===l||void 0===l)&&(t instanceof HTMLElement&&(l=t.attributes[e]),null===l||void 0===l))return null;i=l.value.split(".");for(n in i)if(a=a[i[n]],void 0===a)return console.warn("px-data-table: Custom function was used, but was not found on window. Is the path correct?"),null;return a},_defaultSortAlphabetically:function(e,t){return this.descending?e.value<t.value?1:-1:e.value>t.value?1:-1},_defaultSortSelected:function(e,t){return this.descending?e.value&&!t.value?1:!e.value&&t.value?-1:0:e.value&&!t.value?-1:!e.value&&t.value?1:0},_filter:function(e){var t,i,n,a,l=this.$.filterRepeat.modelForElement(e.target).column;if(l&&l.filterable){t=e.target.value,i=!0;for(n in this.filteredColumns)a=this.filteredColumns[n],a.name===l.name&&(i=!1,""===t||void 0===t||null===t?this.filteredColumns.splice(n,1):a.userEntry=t);i&&this.filteredColumns.push({name:l.name,userEntry:t}),this._filterSortAndUpdateDisplayedTable()}},_filterByColumn:function(e,t,i){var n,a,l,r,o=this._getFilterFunction(e),s=this;for(n=0,a=i.length;n<a;n++)i[n]._filtered===!1&&(l=o(t,this._getInternalDataAt(i[n],e)),l||this._setInternalDataAt(i[n],"_filtered",!0));return this.filtered=i.some(function(e){return s._getInternalCellStateAt(e,"_filtered")}),r=i.filter(function(e){return!s._getInternalCellStateAt(e,"_filtered")})},_getFilterFunction:function(e){var t;return this.meta.forEach(function(i){e===i.name&&(t=this._resolveFunctionOnWindow("filter-function-name",i))},this),t||(t=this._defaultFilter),t},_defaultFilter:function(e,t){return void 0===e||null===e||""===e||t.toString().toLowerCase().indexOf(e.toString().toLowerCase())>-1},_save:function(e){var t=e.model.internalRow,i=e.model.column,n=e.detail.newValue;t&&(this.fire("before-save",{event:e,row:t,column:i}),this._setInternalDataAt(t,i.name,n),e.currentTarget.cellValue=this._getInternalDataAt(t,i.name),e.currentTarget.cellDisplayValue=this._readContent(t,i),this.data[t.row.dataIndex][i.name]=n,this.notifyPath("data."+t.row.dataIndex+"."+i.name,n)),i.required&&!e.target.validity.valid&&this.fire("after-invalid",{event:e,row:t,column:i}),this.fire("after-save",{event:e,row:t,column:i})},_cellChanged:function(e,t){return e!==t},_handleValidateEvent:function(e){var t=e.model.column,i=t.validate(e.detail.newValue);e.currentTarget.cellValidation=i,this._setInternalCellValidationStateAt(e.model.internalRow,t.name,i)},_clickRow:function(e){var t,i=e.model.column,n=e.model.internalRow,a={row:n,column:i};this.fire("px-row-click",a),this.selectable&&(this._selectRow(n,this.$.recordList.indexForElement(e.currentTarget)),t=Polymer.dom(this.root).querySelector("#selectAllCheckbox"),t.checked=!1,"_selected"===this.sortedColumn&&this.set("sortedColumn",""))},_clickCell:function(e){var t=e.model.column,i=e.model.internalRow,n={row:i,column:t,rowIndex:this.$.recordList.indexForElement(e.currentTarget)};this.fire("px-cell-click",n)},_clickSelectAll:function(e){e.target.checked?this._setAllRows(!0):this._setAllRows(!1)},_setAllRows:function(e){var t,i;for(t=0,i=this._internalData.length;t<i;t++)this._setInternalDataAt(this._internalData[t],"_selected",e);for(t=0,i=this.displayedRows.length;t<i;t++)this.notifyPath("displayedRows."+t+"._selected",this.displayedRows[t]._selected);if(this.splice("selectedRows",0,this.selectedRows.length),e)for(t=0,i=this._internalData.length;t<i;t++)this.push("selectedRows",this._internalData[t]);this.set("meta.0.label","Selected ("+this.selectedRows.length+")"),this.fire("px-select-all-click",this.selectedRows)},_selectRow:function(e,t){this.fire("before-select",e),this.selectedRows.indexOf(e)>-1?(e._selected=!1,this.notifyPath("displayedRows."+t+"._selected",e._selected),this.splice("selectedRows",this.selectedRows.indexOf(e),1)):(e._selected=!0,this.notifyPath("displayedRows."+t+"._selected",e._selected),this.push("selectedRows",e)),this.set("meta.0.label","Selected ("+this.selectedRows.length+")"),this.fire("after-select",e)},_dragDropColumnHeader:function(e){this.enableColumnReorder&&this._dropColumnHeader(this._findHeaderFromChild(e.target))},_touchDropColumnHeader:function(e){if(this.enableColumnReorder){this._removeDragFromSourceHeader();var t=document.elementFromPoint(event.changedTouches[0].clientX,event.changedTouches[0].clientY);t=this._findHeaderFromChild(t),this._dropColumnHeader(t)}},_dropColumnHeader:function(e){var t,i,n,a,l,r,o=this._columnDragged;i=e.classList.toString().match(/.*aha-(.*)-th/),n=i&&i.length>1?i[1]:null,null!=n&&(n!==o?(l=this.getEffectiveChildren(),l.forEach(function(e){e.name===o&&(t=e),e.name===n&&(a=e)}),(t&&"_selected"!==n||t!==l[0])&&(r=Polymer.dom(t).parentNode,Polymer.dom(r).removeChild(t),Polymer.dom.flush(),"_selected"===n?Polymer.dom(r).insertBefore(t,l[0]):Polymer.dom(r).insertBefore(t,a.nextSibling))):e.classList.remove("dragged")),this._removeInsertionDisplay()},_dragOverHeader:function(e){if(this.enableColumnReorder){var t=this._findHeaderFromChild(e.target);t.classList.contains("aha-insertion-indicator-th")||(e.preventDefault(),this._allowColumnDrop(t,this._requestInsertionIndicatorRemoval&&this._displayingInsertion))}},_touchMoveHeader:function(e){if(this.enableColumnReorder){var t=document.elementFromPoint(event.changedTouches[0].clientX,event.changedTouches[0].clientY);t=this._findHeaderFromChild(t),t.classList.contains("aha-insertion-indicator-th")||this._allowColumnDrop(t,t!==this._findHeaderFromChild(e.target))}},_allowColumnDrop:function(e,t){if(t){this.set("_requestInsertionIndicatorRemoval",!1);var i,n,a=e.classList.toString().match(/.*aha-(.*)-th/),l=a&&a.length>1?a[1]:null;if(null!=l&&(this.meta.forEach(function(e,t){e.name===l?i=t:"insertion-indicator"===e.name&&(n=t)}),void 0!==i&&i+1!==n)){var r=this.splice("meta",n,1)[0];i+1>n&&i--,this.splice("meta",i+1,0,r)}}else if(!this._displayingInsertion){var a=e.classList.toString().match(/.*aha-(.*)-th/),l=a&&a.length>1?a[1]:null;if(null!==l){var i;this.meta.forEach(function(e,t){e.name===l&&(i=t)});var o=this._generateMetaForColumn("insertion-indicator","string",!1,"");o.filterable=!1,o.sortable=!1,this.splice("meta",i+1,0,o),this.set("_displayingInsertion",!0)}}},_dragLeave:function(e){this._removeInsertionDisplay()},_dragEndColumnHeader:function(e){this._removeDragFromSourceHeader()},_removeInsertionDisplay:function(){var e=this;this.set("_requestInsertionIndicatorRemoval",!0),window.setTimeout(function(){if(e.enableColumnReorder&&e._displayingInsertion&&e._requestInsertionIndicatorRemoval){var t;e.meta.forEach(function(e,i){"insertion-indicator"===e.name&&(t=i)}),e.splice("meta",t,1),e.set("_displayingInsertion",!1),this._columnDragged=""}},100)},_dragStartColumnHeader:function(e){var t=this._findHeaderFromChild(e.target);if(this.enableColumnReorder&&t.classList.contains("moveable")){var i=t.classList.toString().match(/.*aha-(.*)-th/)[1];this._columnDragged=i,t.classList.add("dragged"),e.changedTouches&&(e.preventDefault(),this._allowColumnDrop(t,!1))}else e.preventDefault()},_removeDragFromSourceHeader:function(){var e=Polymer.dom(this.root).querySelector(".dragged");e&&e.classList.remove("dragged")},_columnChooserChanged:function(e){if(e.path.indexOf("checked")!==-1){var t=e.path.match(/\.#(\d+)./)[1];if(t){var i=e.base[t].name,n=e.value;n?this.showColumn(i):this.hideColumn(i)}}},_computeColumnChooserItems:function(e){var t=[];return e.forEach(function(e,i){"_selected"!==e.name&&"insertion-indicator"!==e.name&&t.push({name:e.name,val:e.label,checked:!e.hide})}),t},hideColumn:function(e){this.meta.forEach(function(t,i){t.name===e&&(t.hide=!0,this.notifyPath("meta."+i+".hide",!0))},this)},showColumn:function(e){this.meta.forEach(function(t,i){t.name===e&&(t.hide=!1,this.notifyPath("meta."+i+".hide",!1))},this)},_headerTrack:function(e){var t=this._findHeaderFromChild(e.target);t!==this&&(t.style.width=this._headerInitialSize+e.detail.dx+"px")},_headerResizeMouseDown:function(e){var t,i=this._findHeaderFromChild(e.target);i!==this&&(t=i.getBoundingClientRect(),this._headerInitialSize=t.width,e.preventDefault(),e.stopPropagation())},_getRowClass:function(e){return["tr","rows",this.striped?"striped":""].join(" ")},_getHighlightValue:function(e,t,i){var n=Polymer.dom(t).querySelectorAll("px-data-table-highlight"),a=!1,l={value:!1};return n.forEach(function(i){a=i.highlight(this._getInternalDataAt(e,t.name)),l.value&&a?"low"===l.highlightValue?l.highlightClass="cell--value__highlight--color__"+i.highlightValue:"medium"===l.highlightValue?"high"===i.highlightValue&&(l.highlightClass="cell--value__highlight--color__"+i.highlightValue):l.highlightClass="cell--value__highlight--color__"+i.highlightValue:l.value||(l.value=a,l.highlightClass="cell--value__highlight--color__"+i.highlightValue),"row"===i.highlightType&&(this._setInternalDataAt(e,"_highlight",l),l={value:!1})}.bind(this)),l},_isSelectAllColumn:function(e){return e.selectAll},_isFilterableColumn:function(e,t){return!e.selectAll&&e.filterable&&!e.hide},_readContent:function(e,t){var i=this._getInternalDataAt(e,t.name);return null===i||void 0===i||"string"==typeof i&&0===i.trim().length?"":this._shouldClipDatumString(e,t)?this._clipDatumString(i,t):i},_shouldClipDatumString:function(e,t){var i=this._getInternalDataAt(e,t.name),n=t.maxColumnCharacterWidth;return 0!==n&&null!==i&&void 0!==i&&("string"!=typeof i||0!==i.trim().length)&&(void 0!==n&&null!==n&&i.length>n)},_clipDatumString:function(e,t){var i,n,a=t.maxColumnCharacterWidth,l=t.ellipsisClipPosition;return"left"===l?e="…"+e.substr(e.length-a,e.length):"center"===l?(i=Math.floor(a/2),n=a-i,e=e.substr(0,i)+"…"+e.substr(e.length-n,e.length)):e=e.substr(0,a)+"…",e},_isEqual:function(e,t){return e===t},_isFalse:function(e){return e===!1||"false"===e},_getHeaderClass:function(e){var t=["th ","aha-"+e.name+"-th","u-p0"];return e.sortable&&t.push("sortable"),this.tableRows||this.tableColumns||t.push("th--no-borders"),this.enableColumnReorder&&"selected"!==e.type&&t.push("moveable"),t.join(" ")},_getSecondHeaderClass:function(e){var t=["tr","tr--filter"];return e||t.push("hidden"),t.join(" ")},_getFilterHeaderClass:function(e){return"insertion-indicator"===e.name?"td insertion-indicator":"td"},_getSortingIcon:function(e,t,i){var n=" ";return t===e.name&&(n=i?"polymer-font-awesome:fa-caret-down":"polymer-font-awesome:fa-caret-up"),n},_getSortingClass:function(e,t,i){var n="sorting fa";return t!==e.name&&(n+=" visuallyhidden"),n},_getTextSortingClass:function(e,t){var i=["column-head","u-m--"];return e.sortable&&i.push("sorted-text-hover"),t===e.name&&i.push("sorted-text"),i.join(" ")},_getTableClass:function(e,t){var i=["table","table--small"];return e&&i.push("table--rows"),t&&i.push("table--columns"),i.join(" ")},_getPaginationVisibility:function(e){return e?"visuallyhidden":""},_getSelectedCellClass:function(e,t){var i=["td"];return i.push(e?"selected-cell__selected":""),i.push(t.value?t.highlightClass:""),i.join(" ")},_findHeaderFromChild:function(e){for(var t=e;!t.classList.contains("th")&&t!==this;)t=Polymer.dom(t).parentNode;return t},_computeIfColumnFilterEnabled:function(e,t){this._enableFilterRow=e&&(this.selectable===!0||t&&this.meta.some(function(e){return this._isFilterableColumn(e)}.bind(this)))}});</script>
</body></html>