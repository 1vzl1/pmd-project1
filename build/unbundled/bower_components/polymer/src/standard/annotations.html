<html><head><link rel="import" href="../lib/annotations/annotations.html">
<link rel="import" href="../lib/resolve-url.html">
<script>Polymer.Base._addFeature({_prepAnnotations:function(){if(this._template){var t=this;Polymer.Annotations.prepElement=function(e){t._prepElement(e)},this._template._content&&this._template._content._notes?this._notes=this._template._content._notes:(this._notes=Polymer.Annotations.parseAnnotations(this._template),this._processAnnotations(this._notes)),Polymer.Annotations.prepElement=null}else this._notes=[]},_processAnnotations:function(t){for(var e=0;e<t.length;e++){for(var n=t[e],o=0;o<n.bindings.length;o++)for(var s=n.bindings[o],i=0;i<s.parts.length;i++){var r=s.parts[i];if(!r.literal){var a=this._parseMethod(r.value);a?r.signature=a:r.model=this._modelForPath(r.value)}}if(n.templateContent){this._processAnnotations(n.templateContent._notes);var l=n.templateContent._parentProps=this._discoverTemplateParentProps(n.templateContent._notes),h=[];for(var _ in l){var d="_parent_"+_;h.push({index:n.index,kind:"property",name:d,propertyName:d,parts:[{mode:"{",model:_,value:_}]})}n.bindings=n.bindings.concat(h)}}},_discoverTemplateParentProps:function(t){for(var e,n={},o=0;o<t.length&&(e=t[o]);o++){for(var s,i=0,r=e.bindings;i<r.length&&(s=r[i]);i++)for(var a,l=0,h=s.parts;l<h.length&&(a=h[l]);l++)if(a.signature){for(var _=a.signature.args,d=0;d<_.length;d++){var p=_[d].model;p&&(n[p]=!0)}a.signature.dynamicFn&&(n[a.signature.method]=!0)}else a.model&&(n[a.model]=!0);if(e.templateContent){var m=e.templateContent._parentProps;Polymer.Base.mixin(n,m)}}return n},_prepElement:function(t){Polymer.ResolveUrl.resolveAttrs(t,this._template.ownerDocument)},_findAnnotatedNode:Polymer.Annotations.findAnnotatedNode,_marshalAnnotationReferences:function(){this._template&&(this._marshalIdNodes(),this._marshalAnnotatedNodes(),this._marshalAnnotatedListeners())},_configureAnnotationReferences:function(){for(var t=this._notes,e=this._nodes,n=0;n<t.length;n++){var o=t[n],s=e[n];this._configureTemplateContent(o,s),this._configureCompoundBindings(o,s)}},_configureTemplateContent:function(t,e){t.templateContent&&(e._content=t.templateContent)},_configureCompoundBindings:function(t,e){for(var n=t.bindings,o=0;o<n.length;o++){var s=n[o];if(s.isCompound){for(var i=e.__compoundStorage__||(e.__compoundStorage__={}),r=s.parts,a=new Array(r.length),l=0;l<r.length;l++)a[l]=r[l].literal;var h=s.name;i[h]=a,s.literal&&"property"==s.kind&&(e._configValue?e._configValue(h,s.literal):e[h]=s.literal)}}},_marshalIdNodes:function(){this.$={};for(var t,e=0,n=this._notes.length;e<n&&(t=this._notes[e]);e++)t.id&&(this.$[t.id]=this._findAnnotatedNode(this.root,t))},_marshalAnnotatedNodes:function(){if(this._notes&&this._notes.length){for(var t=new Array(this._notes.length),e=0;e<this._notes.length;e++)t[e]=this._findAnnotatedNode(this.root,this._notes[e]);this._nodes=t}},_marshalAnnotatedListeners:function(){for(var t,e=0,n=this._notes.length;e<n&&(t=this._notes[e]);e++)if(t.events&&t.events.length)for(var o,s=this._findAnnotatedNode(this.root,t),i=0,r=t.events;i<r.length&&(o=r[i]);i++)this.listen(s,o.name,o.value)}});</script>
</head><body></body></html>