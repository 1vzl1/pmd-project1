<html><head><link rel="import" href="../lib/bind/accessors.html">
<link rel="import" href="../lib/bind/effects.html">

<script>Polymer.Base._addFeature({_addPropertyEffect:function(t,e,r){var a=Polymer.Bind.addPropertyEffect(this,t,e,r);a.pathFn=this["_"+a.kind+"PathEffect"]},_prepEffects:function(){Polymer.Bind.prepareModel(this),this._addAnnotationEffects(this._notes)},_prepBindings:function(){Polymer.Bind.createBindings(this)},_addPropertyEffects:function(t){if(t)for(var e in t){var r=t[e];if(r.observer&&this._addObserverEffect(e,r.observer),r.computed&&(r.readOnly=!0,this._addComputedEffect(e,r.computed)),r.notify&&this._addPropertyEffect(e,"notify",{event:Polymer.CaseMap.camelToDashCase(e)+"-changed"}),r.reflectToAttribute){var a=Polymer.CaseMap.camelToDashCase(e);"-"===a[0]?this._warn(this._logf("_addPropertyEffects","Property "+e+" cannot be reflected to attribute "+a+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.')):this._addPropertyEffect(e,"reflect",{attribute:a})}r.readOnly&&Polymer.Bind.ensurePropertyEffects(this,e)}},_addComputedEffect:function(t,e){for(var r,a=this._parseMethod(e),n=a.dynamicFn,o=0;o<a.args.length&&(r=a.args[o]);o++)this._addPropertyEffect(r.model,"compute",{method:a.method,args:a.args,trigger:r,name:t,dynamicFn:n});n&&this._addPropertyEffect(a.method,"compute",{method:a.method,args:a.args,trigger:null,name:t,dynamicFn:n})},_addObserverEffect:function(t,e){this._addPropertyEffect(t,"observer",{method:e,property:t})},_addComplexObserverEffects:function(t){if(t)for(var e,r=0;r<t.length&&(e=t[r]);r++)this._addComplexObserverEffect(e)},_addComplexObserverEffect:function(t){var e=this._parseMethod(t);if(!e)throw new Error("Malformed observer expression '"+t+"'");for(var r,a=e.dynamicFn,n=0;n<e.args.length&&(r=e.args[n]);n++)this._addPropertyEffect(r.model,"complexObserver",{method:e.method,args:e.args,trigger:r,dynamicFn:a});a&&this._addPropertyEffect(e.method,"complexObserver",{method:e.method,args:e.args,trigger:null,dynamicFn:a})},_addAnnotationEffects:function(t){for(var e,r=0;r<t.length&&(e=t[r]);r++)for(var a,n=e.bindings,o=0;o<n.length&&(a=n[o]);o++)this._addAnnotationEffect(a,r)},_addAnnotationEffect:function(t,e){Polymer.Bind._shouldAddListener(t)&&Polymer.Bind._addAnnotatedListener(this,e,t.name,t.parts[0].value,t.parts[0].event,t.parts[0].negate);for(var r=0;r<t.parts.length;r++){var a=t.parts[r];a.signature?this._addAnnotatedComputationEffect(t,a,e):a.literal||("attribute"===t.kind&&"-"===t.name[0]?this._warn(this._logf("_addAnnotationEffect","Cannot set attribute "+t.name+' because "-" is not a valid attribute starting character')):this._addPropertyEffect(a.model,"annotation",{kind:t.kind,index:e,name:t.name,propertyName:t.propertyName,value:a.value,isCompound:t.isCompound,compoundIndex:a.compoundIndex,event:a.event,customEvent:a.customEvent,negate:a.negate}))}},_addAnnotatedComputationEffect:function(t,e,r){var a=e.signature;if(a["static"])this.__addAnnotatedComputationEffect("__static__",r,t,e,null);else{for(var n,o=0;o<a.args.length&&(n=a.args[o]);o++)n.literal||this.__addAnnotatedComputationEffect(n.model,r,t,e,n);a.dynamicFn&&this.__addAnnotatedComputationEffect(a.method,r,t,e,null)}},__addAnnotatedComputationEffect:function(t,e,r,a,n){this._addPropertyEffect(t,"annotatedComputation",{index:e,isCompound:r.isCompound,compoundIndex:a.compoundIndex,kind:r.kind,name:r.name,negate:a.negate,method:a.signature.method,args:a.signature.args,trigger:n,dynamicFn:a.signature.dynamicFn})},_parseMethod:function(t){var e=t.match(/([^\s]+?)\(([\s\S]*)\)/);if(e){var r={method:e[1],"static":!0};if(this.getPropertyInfo(r.method)!==Polymer.nob&&(r["static"]=!1,r.dynamicFn=!0),e[2].trim()){var a=e[2].replace(/\\,/g,"&comma;").split(",");return this._parseArgs(a,r)}return r.args=Polymer.nar,r}},_parseArgs:function(t,e){return e.args=t.map(function(t){var r=this._parseArg(t);return r.literal||(e["static"]=!1),r},this),e},_parseArg:function(t){var e=t.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),r={name:e},a=e[0];switch("-"===a&&(a=e[1]),a>="0"&&a<="9"&&(a="#"),a){case"'":case'"':r.value=e.slice(1,-1),r.literal=!0;break;case"#":r.value=Number(e),r.literal=!0}return r.literal||(r.model=this._modelForPath(e),r.structured=e.indexOf(".")>0,r.structured&&(r.wildcard=".*"==e.slice(-2),r.wildcard&&(r.name=e.slice(0,-2)))),r},_marshalInstanceEffects:function(){Polymer.Bind.prepareInstance(this),this._bindListeners&&Polymer.Bind.setupBindListeners(this)},_applyEffectValue:function(t,e){var r=this._nodes[t.index],a=t.name;if(e=this._computeFinalAnnotationValue(r,a,e,t),!t.customEvent||r[a]!==e)if("attribute"==t.kind)this.serializeValueToAttribute(e,a,r);else{var n=r._propertyInfo&&r._propertyInfo[a];if(n&&n.readOnly)return;this.__setProperty(a,e,!1,r)}},_computeFinalAnnotationValue:function(t,e,r,a){if(a.negate&&(r=!r),a.isCompound){var n=t.__compoundStorage__[e];n[a.compoundIndex]=r,r=n.join("")}return"attribute"!==a.kind&&("className"===e&&(r=this._scopeElementClass(t,r)),("textContent"===e||"input"==t.localName&&"value"==e)&&(r=void 0==r?"":r)),r},_executeStaticEffects:function(){this._propertyEffects&&this._propertyEffects.__static__&&this._effectEffects("__static__",null,this._propertyEffects.__static__)}});</script>
</head><body></body></html>