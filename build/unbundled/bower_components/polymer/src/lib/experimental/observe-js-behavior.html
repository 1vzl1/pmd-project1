<html><head><link rel="import" href="observe-js-import.html">

<script>!function(){["push","pop","shift","unshift","splice"].forEach(function(e){var s=Polymer.Base[e];Polymer.Base[e]=function(e){var r=this.get(e);this._flushObserveJsObservers(r),s.apply(this,arguments),this._discardObserveJsObservers(r)}},this)}(),Polymer.ObserveJsBehavior={_observeJsStatic:{count:0,observerMap:new WeakMap},created:function(){this._observeJsId=this._observeJsStatic.count++},_propertyChanged:function(e,s,r){r&&"object"==typeof r&&this._removeObserveJsObserver(r,e),s&&"object"==typeof s&&this._addObserveJsObserver(s,e)},_addObserveJsObserver:function(e,s){var r=this._observeJsStatic.observerMap.get(e);if(r)r.count++;else{var t={};r={count:1,observer:this._createObserveJsObserver(e,t),elements:t},this._observeJsStatic.observerMap.set(e,r)}var o=r.elements[this._observeJsId];if(o){var i=o.paths[s];i||o.count++,o.paths[s]=i++}else o=r.elements[this._observeJsId]={element:this,paths:{},count:1},o.paths[s]=1},_createObserveJsObserver:function(e,s){var r;return Array.isArray(e)?(r=new ArrayObserver(e),r.open(function(r){this._notifyObserveJsPath(s,"splices",{keySplices:Polymer.Collection.applySplices(e,r),indexSplices:r})},this)):(r=new ObjectObserver(e),r.open(function(e,r,t){Object.keys(e).forEach(function(r){this._notifyObserveJsPath(s,r,e[r])},this),Object.keys(r).forEach(function(e){this._notifyObserveJsPath(s,e,void 0)},this),Object.keys(t).forEach(function(e){this._notifyObserveJsPath(s,e,t[e])},this)},this)),r},_notifyObserveJsPath:function(e,s,r){for(var t in e){var o=e[t];for(var i in o.paths)o.element.set(i+"."+s,r)}},_removeObserveJsObserver:function(e,s){var r=this._observeJsStatic.observerMap.get(e),t=r.elements[this._observeJsId];0===--t.paths[s]&&(delete t.paths[s],0===--t.count&&(delete r.elements[this._observeJsId],0===--r.count&&(r.observer.close(),r.observer=null)))},_flushObserveJsObservers:function(e){var s=this._observeJsStatic.observerMap.get(e);s&&s.observer.deliver()},_discardObserveJsObservers:function(e){var s=this._observeJsStatic.observerMap.get(e);s&&s.observer.discardChanges()},_listen:function(e,s,r){var t=this;Polymer.Base._listen.call(this,e,s,function(){r.apply(t,arguments),t._observerCheckpoint()})},async:function(e,s){var r=this;Polymer.Base.async.call(this,function(){e.apply(r,arguments),r._observerCheckpoint()},s)},debounce:function(e,s,r){Polymer.Base.debounce.call(this,e,s,function(){s.apply(this,arguments),this._observerCheckpoint()},r)},_observerCheckpoint:function(){Polymer.ObserveJsBehavior.debouncer=Polymer.Debounce(Polymer.ObserveJsBehavior.debouncer,Platform.performMicrotaskCheckpoint)}},setInterval(Platform.performMicrotaskCheckpoint,125);</script>
</head><body></body></html>